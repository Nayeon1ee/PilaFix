<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MemberManageDAO">
	<resultMap type="com.dev.pilafix.admin.member_manage.MemberVO" id="memberResult">
	    <id property="csMemberCode" column="CS_MEMBER_CODE"/>
	    <result property="csEmailId" column="CS_EMAIL_ID"/>
	    <result property="csPassword" column="CS_PASSWORD" />
	    <result property="csName" column="CS_NAME" />
	    <result property="csPhoneNumber1" column="CS_PHONE_NUMBER1" />
	    <result property="csPhoneNumber2" column="CS_PHONE_NUMBER2" />
	    <result property="csPhoneNumber3" column="CS_PHONE_NUMBER3" />
	    <result property="csBirth" column="CS_BIRTH" />
	    <result property="csGenderMw" column="CS_GENDER_MW" />
	    <result property="csDeleteYn" column="CS_DELETE_YN" />
	    <result property="csAgreementYn1" column="CS_AGREEMENT_YN1" />
	    <result property="csAgreementYn2" column="CS_AGREEMENT_YN2" />
	    <result property="csAgreementYn3" column="CS_AGREEMENT_YN3" />
	    <result property="csRegistrationType" column="CS_REGISTRATION_TYPE" />
	    <result property="csRegistrationDate" column="CS_REGISTRATION_DATE" />
	    <result property="csRoleCode" column="CS_ROLE_CODE" />
	    <result property="connectedCenterCode1" column="CONNECTED_CENTER_CODE1" />
	    <result property="connectedCenterCode2" column="CONNECTED_CENTER_CODE2" />
	    <result property="connectedCenterCode3" column="CONNECTED_CENTER_CODE3" />
	    <result property="connectedCenterName1" column="CONNECTED_CENTER_NAME1" />
	    <result property="connectedCenterName2" column="CONNECTED_CENTER_NAME2" />
	    <result property="connectedCenterName3" column="CONNECTED_CENTER_NAME3" />
	</resultMap>

	<resultMap type="com.dev.pilafix.admin.member_manage.PaymentHistoryVO" id="paymentResult">
		<id property="paId" column="PA_ID" />
		<result property="ticketCode" column="TICKET_CODE" />
		<result property="paAmount" column="PA_AMOUNT" />
		<result property="memberCode" column="MEMBER_CODE" />
		<result property="paMethod" column="PA_METHOD" />
		<result property="paDatetime" column="PA_DATETIME" />
		<result property="centerName" column="CENTER_NAME" />
	</resultMap>
	
	<resultMap type="com.dev.pilafix.admin.member_manage.CenterConnectHistoryVO" id="connectHistoryResult">
		<id property="chCode" column="CH_CODE" />
		<result property="memberCode" column="MEMBER_CODE" />
		<result property="centerCode" column="CENTER_CODE" />
		<result property="chDatetime" column="CH_DATETIME" />
		<result property="chCurrentConnectionYN" column="CH_CURRENT_CONNECTION_YN" />
		<result property="disconnection_date" column="DISCONNECTION_DATE" />
		<result property="centerName" column="CENTER_NAME" />
		
	</resultMap>
	
	<select id="getMemberList" resultMap="memberResult">
		SELECT CS_MEMBER_CODE,CS_REGISTRATION_TYPE,CS_REGISTRATION_DATE,CS_EMAIL_ID,CS_NAME,CS_BIRTH,CS_REGISTRATION_DATE,CS_DELETE_YN FROM TBL_CST
	</select>

	<select id="getMember" resultMap="memberResult" >
		SELECT *  FROM TBL_CST WHERE CS_MEMBER_CODE=#{csMemberCode}
	</select>

	<select id="getPaymentList" resultMap="paymentResult">
		SELECT * FROM TBL_PAYMENT
		<!--  데이터 들어온 후 바꿔야 함 쿼리문 틀린 것 같으니 다시 확인해보기..!
		SELECT PA_ID, TICKET_CODE,
		(SELECT CT_NAME FROM TBL_CENTER WHERE CT_CODE=(SELECT CENTER_CODE FROM TBL_TICKET WHERE TICKET_CODE=TICKET_CODE)) AS CENTER_NAME, 
		PA_AMOUNT, MEMBER_CODE, PA_METHOD, PA_DATETIME 
		FROM TBL_PAYMENT
		WHERE MEMBER_CODE=#{csMemberCode}
		;-->
	</select>
	
	<select id="getCenterConnectHistory" resultMap="connectHistoryResult">
		SELECT CH_CODE, CENTER_CODE,(SELECT CT_NAME FROM TBL_CENTER WHERE CT_CODE=CENTER_CODE)as CENTER_NAME FROM TBL_CENTER_CONN WHERE MEMBER_CODE=#{csMemberCode}
	</select>
	
</mapper>